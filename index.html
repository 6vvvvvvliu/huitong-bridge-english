<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æƒ é€šæ¡¥è‹±è¯­ - å…¨æ–‡ç²¾è¯»</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes fade-in-up {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in-up {
            animation: fade-in-up 0.4s ease-out forwards;
        }
        body {
            background-color: #0f172a;
            color: white;
            margin: 0;
            padding: 0;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        /* ========== è¯¾æ–‡å†…å®¹ ========== */
        const ARTICLE = [
            "Huitong Bridge is located on the Nu River in Baoshan, Yunnan.",
            "It was a vital passage on the Burma Road and an important military station during the War of Resistance against Japanese Aggression.",
            "Originally an iron-chain suspension bridge, it was later rebuilt as a steel-cable suspension bridge with donations from overseas Chinese.",
            "In 1942, to stop the Japanese advance, the defending troops reluctantly blew up the bridge, making it a crucial turning point in the Western Yunnan campaign."
        ];

        const TRANSLATIONS = [
            "æƒ é€šæ¡¥ä½äºäº‘å—ä¿å±±æ€’æ±Ÿä¸Šã€‚",
            "å®ƒæ˜¯ç¼…ç”¸å…¬è·¯ä¸Šçš„é‡è¦é€šé“ï¼Œä¹Ÿæ˜¯æŠ—æ—¥æˆ˜äº‰æœŸé—´çš„ä¸€ä¸ªé‡è¦å†›äº‹ç«™ç‚¹ã€‚",
            "æœ€åˆæ˜¯é“é“¾æ‚¬ç´¢æ¡¥ï¼Œåæ¥ç”±æµ·å¤–åä¾¨ææ¬¾é‡å»ºæˆäº†é’¢ç¼†æ‚¬ç´¢æ¡¥ã€‚",
            "1942å¹´ï¼Œä¸ºäº†é˜»æ­¢æ—¥å†›è¿›æ”»ï¼Œå®ˆå†›ä¸å¾—ä¸ç‚¸æ¯äº†è¿™åº§æ¡¥ï¼Œå®ƒæˆä¸ºäº†æ»‡è¥¿æˆ˜å½¹çš„ä¸€ä¸ªå…³é”®è½¬æŠ˜ç‚¹ã€‚"
        ];

        /* ========== è¯­éŸ³æ’­æ”¾ Hook ========== */
        const useSpeaker = () => {
            const [isPlaying, setIsPlaying] = useState(false);

            const speak = (text) => {
                window.speechSynthesis.cancel();
                setIsPlaying(true);

                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'en-US';
                utterance.rate = 0.85;
                utterance.pitch = 1;

                utterance.onend = () => setIsPlaying(false);
                utterance.onerror = () => setIsPlaying(false);

                window.speechSynthesis.speak(utterance);
            };

            return { speak, isPlaying };
        };

        /* ========== ä¸»åº”ç”¨ ========== */
        const ReadingRoom = () => {
            const [playingIdx, setPlayingIdx] = useState(-1);
            const { speak, isPlaying } = useSpeaker();

            useEffect(() => {
                if (!isPlaying) setPlayingIdx(-1);
            }, [isPlaying]);

            const handlePlaySentence = (text, idx) => {
                if (playingIdx === idx && isPlaying) {
                    window.speechSynthesis.cancel();
                    setPlayingIdx(-1);
                } else {
                    setPlayingIdx(idx);
                    speak(text);
                }
            };

            return (
                <div style={{ minHeight: '100vh', background: '#0f172a', color: 'white', display: 'flex', flexDirection: 'column' }}>
                    {/* å¤´éƒ¨ */}
                    <div style={{ background: '#1e293b', borderBottom: '1px solid #334155', padding: '20px', position: 'sticky', top: 0, zIndex: 100 }}>
                        <div style={{ maxWidth: '900px', margin: '0 auto', display: 'flex', alignItems: 'center', gap: '10px' }}>
                            <span style={{ fontSize: '24px' }}>ğŸ“–</span>
                            <h1 style={{ margin: 0, fontSize: '20px', fontWeight: 'bold', color: '#3b82f6' }}>
                                æƒ é€šæ¡¥è‹±è¯­ç²¾è¯»
                            </h1>
                        </div>
                    </div>

                    {/* ä¸»å†…å®¹ */}
                    <div style={{ maxWidth: '900px', margin: '0 auto', width: '100%', padding: '30px 20px', flex: 1 }}>
                        <div style={{ textAlign: 'center', marginBottom: '40px' }}>
                            <h2 style={{ fontSize: '36px', fontWeight: 'bold', margin: '0 0 10px 0' }}>
                                Huitong Bridge
                            </h2>
                            <p style={{ color: '#94a3b8', margin: 0 }}>æƒ é€šæ¡¥ Â· å…¨æ–‡ç²¾è¯»</p>
                        </div>

                        {/* è¯¾æ–‡å†…å®¹ */}
                        <div style={{ background: '#1e293b', borderRadius: '12px', padding: '30px', border: '1px solid #334155', marginBottom: '30px' }}>
                            {ARTICLE.map((sentence, idx) => (
                                <div key={idx} style={{ marginBottom: '30px', borderLeft: '4px solid #3b82f6', paddingLeft: '20px', paddingTop: '10px', paddingBottom: '10px' }}>
                                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', gap: '15px' }}>
                                        <div style={{ flex: 1 }}>
                                            <p style={{ fontSize: '18px', lineHeight: '1.8', margin: '0 0 15px 0', color: 'white' }}>
                                                {sentence}
                                            </p>
                                            <p style={{ fontSize: '14px', color: '#94a3b8', margin: 0, fontStyle: 'italic' }}>
                                                {TRANSLATIONS[idx]}
                                            </p>
                                        </div>
                                        <button
                                            onClick={() => handlePlaySentence(sentence, idx)}
                                            style={{
                                                padding: '12px',
                                                borderRadius: '50%',
                                                border: 'none',
                                                background: playingIdx === idx && isPlaying ? '#dc2626' : '#475569',
                                                color: 'white',
                                                cursor: 'pointer',
                                                fontSize: '18px',
                                                minWidth: '48px',
                                                height: '48px',
                                                display: 'flex',
                                                alignItems: 'center',
                                                justifyContent: 'center',
                                                flexShrink: 0,
                                                transition: 'all 0.2s',
                                                boxShadow: playingIdx === idx && isPlaying ? '0 0 0 2px #ef4444' : 'none'
                                            }}
                                            onMouseEnter={e => !isPlaying && (e.target.style.background = '#3b82f6')}
                                            onMouseLeave={e => playingIdx !== idx && (e.target.style.background = '#475569')}
                                        >
                                            ğŸ”Š
                                        </button>
                                    </div>
                                </div>
                            ))}
                        </div>

                        {/* å­¦ä¹ å»ºè®® */}
                        <div style={{ background: 'linear-gradient(to right, #1e293b, #0f172a)', borderRadius: '12px', padding: '20px', border: '1px solid #334155' }}>
                            <h3 style={{ fontSize: '16px', fontWeight: 'bold', color: 'white', margin: '0 0 15px 0' }}>
                                ğŸ“š å­¦ä¹ å»ºè®®
                            </h3>
                            <ul style={{ margin: 0, paddingLeft: '20px', color: '#cbd5e1' }}>
                                <li style={{ marginBottom: '10px' }}>âœ… å…ˆæ•´ä½“æœ—è¯»ä¸€éï¼Œæ„Ÿå—è¯­æµ</li>
                                <li style={{ marginBottom: '10px' }}>âœ… é€å¥æ’­æ”¾ï¼Œè·Ÿéšæ¨¡ä»¿å‘éŸ³</li>
                                <li style={{ marginBottom: '10px' }}>âœ… å¯¹æ¯”ä¸­æ–‡ç¿»è¯‘ï¼ŒåŠ æ·±ç†è§£</li>
                                <li>âœ… åå¤ç»ƒä¹ ï¼Œé€æ­¥æå‡è‹±æ–‡æ°´å¹³</li>
                            </ul>
                        </div>
                    </div>
                </div>
            );
        };

        /* ========== æ¸²æŸ“åº”ç”¨ ========== */
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<ReadingRoom />);
    </script>
</body>
</html>
